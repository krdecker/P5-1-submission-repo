"use strict";function getModel(){return localStorage.model?JSON.parse(localStorage.model):EatsModel}function buildWindowContent(e){var t="http://maps.googleapis.com/maps/api/streetview?size=300x250&location="+e.position.toString().slice(1,-1),o='<img class="bgimg" src="'+t+'">',n='"height:100%;width:80%"',i='<div onclick="itchwindow()" style='+n+">"+o+'<br><span style="color:darkgreen">'+e.title+'</span><br><span style="color:red">-CLICK FOR MORE INFO-</span></div>';return i}function buildSlideContent(e){function t(t,i){console.log("In getVenueInfo: status = "+i);var a=t.response.venues[0];$.ajax({url:fourSquareURL+"/v2/venues/"+a.id,dataType:"json",data:"limit=1&"+s+"&query="+e.name+"&client_id="+kr.foursquare.Client_id+"&client_secret="+kr.foursquare.Client_secret+"&v=20160130",async:!0,success:o,error:n})}function o(t){var o=t.response.venue;i="FourSquare info: <br><br>"+o.name+"<br>"+o.contact.formattedPhone+"<br>- "+o.location.address+"<br>- "+o.location.city+"<br>- "+o.location.country+"<br>x-street: "+o.location.crossStreet+"<br>Check-ins: "+o.stats.checkinsCount.toString()+"<br>"+o.likes.summary+'<br><br><span style="background-color:#'+o.ratingColor+';color:black;padding:1%">Rating: '+o.rating.toString()+'</span><br><img src="'+o.bestPhoto.prefix+"cap300"+o.bestPhoto.suffix+'">',updateSlideContent(e,i)}function n(t,o,n){var i="Sorry. 3rd party info unavailable.";updateSlideContent(e,i)}var i="",s="ll="+e.location.lat.toString()+","+e.location.lng.toString();$.ajax({url:fourSquareURL+"/v2/venues/search",dataType:"json",data:"limit=1&"+s+"&query="+e.name+"&client_id="+kr.foursquare.Client_id+"&client_secret="+kr.foursquare.Client_secret+"&v=20160130",async:!0,success:t,error:n})}function updateSlideContent(e,t){e.slideContent=t;var o=getSpot(e.name);o&&(console.log("in updateSlideContent: viewSpot "),o.slideContent=t)}function init(){map=new google.maps.Map(document.getElementById("map-div"),mapOptions),model=getModel(),(void 0===model.spots[0].slideContent||"Sorry"==model.spots[0].slideContent.slice(0,5))&&model.spots.forEach(function(e){buildSlideContent(e)}),viewModel.spotList(model.spots),viewModel.filterOn(!narrowScreen()),infowindow=new google.maps.InfoWindow({}),map.setZoom(model.zoomLevel),map.setCenter(model.center),model.spots.forEach(function(e){vmSpots.push(new Spot(e))}),google.maps.event.addDomListener(window,"resize",function(){map.setCenter(model.center),viewModel.filterOn(!narrowScreen())}),window.setTimeout(function(){localStorage.model=JSON.stringify(model)},3e3)}function filterList(e,t){var o=[],n=new RegExp(e,["i"]);return t.forEach(function(e,t,i){n.test(e.name)&&o.push(e)}),o}function getSpot(e){for(var t=0;t<vmSpots.length;t++)if(vmSpots[t].name==e)return vmSpots[t]}function resetMarkers(e){vmSpots.forEach(function(e){e.hideMarker()}),e.forEach(function(e){getSpot(e.name).showMarker()})}function itchwindow(){viewModel.openAPIslide(infowindow.anchor.title)}function cleanUpScreen(){infowindow.close(),map.setZoom(model.zoomLevel),map.setCenter(model.center),viewModel.slideOff(),$("ul.spot-list li").removeClass("hilight under")}function dubSlideContents(){model.spots[0].slideContent&&model.spots.forEach(function(e,t){vmSpots[t].slideContent=e.slideContent,localStorage.model=JSON.stringify(model)})}function narrowScreen(){var e=window.matchMedia("(max-width: 549px)");return e.matches?!0:void 0}var EatsModel={zoomLevel:18,center:{lat:49.262387,lng:-123.069956},spots:[{name:"Uncle Fatih's Pizza",location:{lat:49.262437,lng:-123.070215},category:"pizza"},{name:"Buddha's Orient Express",location:{lat:49.262719,lng:-123.069289},category:"asian"},{name:"Booster Juice",location:{lat:49.262641,lng:-123.069438},category:"juice"},{name:"Starbucks Coffee",location:{lat:49.261874,lng:-123.070076},category:"coffee"},{name:"Blenz Coffee",location:{lat:49.262534,lng:-123.069529},category:"coffee"},{name:"Megabite Pizza",location:{lat:49.262779,lng:-123.069317},category:"pizza"},{name:"Broadway Station Sushi",location:{lat:49.262084,lng:-123.070962},category:"asian"}]},model={},fourSquareURL="https://api.foursquare.com",map,vmSpots=[],infowindow,RedRoadsNGreenBusStops=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{gamma:.65},{hue:"#ff9c30"},{visibility:"on"},{saturation:99},{lightness:-12}]},{featureType:"transit",stylers:[{hue:"#00ff33"},{gamma:.6},{saturation:5},{visibility:"on"},{weight:4.6},{lightness:-12}]}],mapOptions={center:{lat:49.262387,lng:-123.069868},zoom:16,zoomControl:!0,scrollwheel:!1,draggable:!0,disableDoubleClickZoom:!0,disableDefaultUI:!0,styles:RedRoadsNGreenBusStops},icons={asian:{icon:"img/asian.png"},coffee:{icon:"img/coffee.png"},food:{icon:"img/food.png"},juice:{icon:"img/juice.png"},pizza:{icon:"img/pizza.png"}},Spot=function(e){var t=this;this.name=e.name,this.location=e.location,this.category=e.category,this.slideContent=e.slideContent,this.marker=new google.maps.Marker({position:this.location,title:this.name,icon:icons[this.category].icon,map:map,opacity:.4}),this.windowContent=buildWindowContent(this.marker),this.clickEvent=google.maps.event.addListener(this.marker,"click",function(){t.doOpening()}),this.overEvent=google.maps.event.addListener(this.marker,"mouseover",function(){t.hiLightListItem()}),this.outEvent=google.maps.event.addListener(this.marker,"mouseout",function(){t.loLightListItem()})};Spot.prototype.hiLightListItem=function(){var e=this;cleanUpScreen(),$("li:contains("+e.name+")").toggleClass("hilight under")},Spot.prototype.loLightListItem=function(){var e=this;$("li:contains("+e.name+")").toggleClass("hilight under")},Spot.prototype.doBounce=function(){cleanUpScreen(),this.marker.setAnimation(google.maps.Animation.BOUNCE)},Spot.prototype.stopBounce=function(){this.marker.setAnimation(null)},Spot.prototype.doOpening=function(){var e=this;cleanUpScreen(),this.marker.setAnimation(google.maps.Animation.BOUNCE),window.setTimeout(function(){e.openWindow(),e.marker.setAnimation(null)},1e3)},Spot.prototype.openWindow=function(){var e=this;viewModel.listCollapse(),infowindow.setContent(this.windowContent),infowindow.open(map,this.marker),this.closeEvent=google.maps.event.addListener(infowindow,"closeclick",function(){cleanUpScreen(),viewModel.listExpand(),google.maps.event.removeListener(e.closeEvent)})},Spot.prototype.hideMarker=function(){this.marker.setMap(null)},Spot.prototype.showMarker=function(){this.marker.setMap(map)};var ViewModel=function(){var e=this;e.listOn=ko.observable(!0),e.burgerMenu=ko.observable(!1),e.spotList=ko.observableArray(),e.slideOn=ko.observable(!1),e.slideContent=ko.observable(),e.filterOn=ko.observable(!0),e.filterSlot=ko.observable(),e.isSelected=ko.observable(!1),e.bounceMarker=function(){var e=getSpot(this.name);e.doBounce()},e.unbounceMarker=function(){var e=getSpot(this.name);e.stopBounce()},e.spotPick=function(){var e=getSpot(this.name);e.doOpening()},e.setFilterSelected=function(){this.isSelected(!0),cleanUpScreen(),e.listExpand()},e.filterSlot.subscribe(function(t){e.listExpand(),e.spotList(filterList(t,vmSpots)),resetMarkers(e.spotList())}),e.onEnter=function(t,o){return 13===o.keyCode?infowindow.anchor?e.openAPIslide(infowindow.anchor.title):1===e.spotList().length&&e.spotList()[0].doOpening():(infowindow&&infowindow.close(),e.slideOff(),e.listExpand()),!0},e.listCollapse=function(){narrowScreen()&&(e.listOn(!1),e.burgerMenu(!0))},e.listExpand=function(){cleanUpScreen(),e.burgerMenu(!1),e.listOn(!0)},e.openAPIslide=function(e){var t=getSpot(e);t.slideContent||dubSlideContents(),viewModel.slideContent(t.slideContent),viewModel.slideOn(!0)},e.slideOff=function(){this.slideOn(!1)}},viewModel=new ViewModel;ko.applyBindings(viewModel);var kr={foursquare:{Owner:"KR Decker",Client_id:"ZVLKTKSGULFEQ3XMWWI3AL1A2KXYBEKD1LKSURUZDGZY41JX",Client_secret:"TMT203DHWOPR3R4RSM1HE4RMOKEWLGTT0FLMZMUZ1OJHMAK1"},yelp:{Consumer_Key:"XrxJOUgGNKq9ZuWhBX1LDw",Consumer_Secret:"zr2I76nT8l0O-trkupYE00B9BTA",Token:"-_F8aOxonR6q5SqvURwwgLIdU-qteS-B",Token_Secret:"GF7uRcPWCpzlHcRP3DiJWjvcXJE"},streetview:{key:"AIzaSyAP631z6WqMoptoaGherhJVBGyN1uPHPt4"}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnZXRNb2RlbCIsImxvY2FsU3RvcmFnZSIsIm1vZGVsIiwiSlNPTiIsInBhcnNlIiwiRWF0c01vZGVsIiwiYnVpbGRXaW5kb3dDb250ZW50IiwibWFya2VyIiwic3RyZWV0dmlld1VybCIsInBvc2l0aW9uIiwidG9TdHJpbmciLCJzbGljZSIsInBpY3R1cmUiLCJjc3MiLCJjb250ZW50IiwidGl0bGUiLCJidWlsZFNsaWRlQ29udGVudCIsInNwb3QiLCJnZXRWZW51ZUluZm8iLCJkYXRhIiwic3RhdHVzIiwiY29uc29sZSIsImxvZyIsInZlbnVlIiwicmVzcG9uc2UiLCJ2ZW51ZXMiLCIkIiwiYWpheCIsInVybCIsImZvdXJTcXVhcmVVUkwiLCJpZCIsImRhdGFUeXBlIiwibG9jIiwibmFtZSIsImtyIiwiZm91cnNxdWFyZSIsIkNsaWVudF9pZCIsIkNsaWVudF9zZWNyZXQiLCJhc3luYyIsInN1Y2Nlc3MiLCJmb3JtYXRTaG93RGF0YSIsImVycm9yIiwic2VuZEVycm9yIiwiZm9ybWF0dGVkRGF0YSIsImNvbnRhY3QiLCJmb3JtYXR0ZWRQaG9uZSIsImxvY2F0aW9uIiwiYWRkcmVzcyIsImNpdHkiLCJjb3VudHJ5IiwiY3Jvc3NTdHJlZXQiLCJzdGF0cyIsImNoZWNraW5zQ291bnQiLCJsaWtlcyIsInN1bW1hcnkiLCJyYXRpbmdDb2xvciIsInJhdGluZyIsImJlc3RQaG90byIsInByZWZpeCIsInN1ZmZpeCIsInVwZGF0ZVNsaWRlQ29udGVudCIsIm9iamVjdCIsImV4Y2VwdGlvbiIsImFqYXhfZXJyb3IiLCJsYXQiLCJsbmciLCJkYXRhU3RyaW5nIiwic2xpZGVDb250ZW50Iiwidm1TcG90IiwiZ2V0U3BvdCIsImluaXQiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm1hcE9wdGlvbnMiLCJ1bmRlZmluZWQiLCJzcG90cyIsImZvckVhY2giLCJ2aWV3TW9kZWwiLCJzcG90TGlzdCIsImZpbHRlck9uIiwibmFycm93U2NyZWVuIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJzZXRab29tIiwiem9vbUxldmVsIiwic2V0Q2VudGVyIiwiY2VudGVyIiwidm1TcG90cyIsInB1c2giLCJTcG90IiwiZXZlbnQiLCJhZGREb21MaXN0ZW5lciIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzdHJpbmdpZnkiLCJmaWx0ZXJMaXN0IiwidXNlclRleHQiLCJtb2RlbEFycmF5IiwicmVzdWx0IiwicmUiLCJSZWdFeHAiLCJlbGVtZW50IiwiaW5kZXgiLCJhcnJheSIsInRlc3QiLCJpIiwibGVuZ3RoIiwicmVzZXRNYXJrZXJzIiwiaGlkZU1hcmtlciIsIml0ZW0iLCJzaG93TWFya2VyIiwiaXRjaHdpbmRvdyIsIm9wZW5BUElzbGlkZSIsImFuY2hvciIsImNsZWFuVXBTY3JlZW4iLCJjbG9zZSIsInNsaWRlT2ZmIiwicmVtb3ZlQ2xhc3MiLCJkdWJTbGlkZUNvbnRlbnRzIiwibWVkaWFxdWVyeSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY2F0ZWdvcnkiLCJSZWRSb2Fkc05HcmVlbkJ1c1N0b3BzIiwiZmVhdHVyZVR5cGUiLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJ2aXNpYmlsaXR5IiwiZ2FtbWEiLCJodWUiLCJzYXR1cmF0aW9uIiwibGlnaHRuZXNzIiwid2VpZ2h0Iiwiem9vbSIsInpvb21Db250cm9sIiwic2Nyb2xsd2hlZWwiLCJkcmFnZ2FibGUiLCJkaXNhYmxlRG91YmxlQ2xpY2tab29tIiwiZGlzYWJsZURlZmF1bHRVSSIsInN0eWxlcyIsImljb25zIiwiYXNpYW4iLCJpY29uIiwiY29mZmVlIiwiZm9vZCIsImp1aWNlIiwicGl6emEiLCJ0aGF0IiwidGhpcyIsIk1hcmtlciIsIm9wYWNpdHkiLCJ3aW5kb3dDb250ZW50IiwiY2xpY2tFdmVudCIsImFkZExpc3RlbmVyIiwiZG9PcGVuaW5nIiwib3ZlckV2ZW50IiwiaGlMaWdodExpc3RJdGVtIiwib3V0RXZlbnQiLCJsb0xpZ2h0TGlzdEl0ZW0iLCJwcm90b3R5cGUiLCJ0b2dnbGVDbGFzcyIsImRvQm91bmNlIiwic2V0QW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiQk9VTkNFIiwic3RvcEJvdW5jZSIsIm9wZW5XaW5kb3ciLCJsaXN0Q29sbGFwc2UiLCJzZXRDb250ZW50Iiwib3BlbiIsImNsb3NlRXZlbnQiLCJsaXN0RXhwYW5kIiwicmVtb3ZlTGlzdGVuZXIiLCJzZXRNYXAiLCJWaWV3TW9kZWwiLCJzZWxmIiwibGlzdE9uIiwia28iLCJvYnNlcnZhYmxlIiwiYnVyZ2VyTWVudSIsIm9ic2VydmFibGVBcnJheSIsInNsaWRlT24iLCJmaWx0ZXJTbG90IiwiaXNTZWxlY3RlZCIsImJvdW5jZU1hcmtlciIsInVuYm91bmNlTWFya2VyIiwic3BvdFBpY2siLCJzZXRGaWx0ZXJTZWxlY3RlZCIsInN1YnNjcmliZSIsIm9uRW50ZXIiLCJrZXlDb2RlIiwic3BvdE5hbWUiLCJhcHBseUJpbmRpbmdzIiwiT3duZXIiLCJ5ZWxwIiwiQ29uc3VtZXJfS2V5IiwiQ29uc3VtZXJfU2VjcmV0IiwiVG9rZW4iLCJUb2tlbl9TZWNyZXQiLCJzdHJlZXR2aWV3Iiwia2V5Il0sIm1hcHBpbmdzIjoiQUFBQSxZQXFEQSxTQUFTQSxZQUNMLE1BQUlDLGNBQWFDLE1BQ05DLEtBQUtDLE1BQU1ILGFBQWFDLE9BRXhCRyxVQUtmLFFBQVNDLG9CQUFtQkMsR0FDeEIsR0FBSUMsR0FBZ0Isd0VBQ0lELEVBQU9FLFNBQVNDLFdBQVdDLE1BQU0sRUFBRSxJQUl2REMsRUFBVSwyQkFBNkJKLEVBQWdCLEtBQ3ZESyxFQUFNLDBCQUNOQyxFQUFVLHFDQUNFRCxFQUFNLElBQU1ELEVBQVUscUNBQ3RCTCxFQUFPUSxNQUFRLHVFQUcvQixPQUFPRCxHQVVYLFFBQVNFLG1CQUFrQkMsR0FxQnZCLFFBQVNDLEdBQWFDLEVBQU1DLEdBQ3hCQyxRQUFRQyxJQUFJLDZCQUErQkYsRUFDM0MsSUFBSUcsR0FBUUosRUFBS0ssU0FBU0MsT0FBTyxFQUVqQ0Ms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LE9BQ1Q4RCxFQUFLL0QsYUFBYS9CLFdBQVdnQyxPQUFPdEcsT0FHUCxJQUEzQm9LLEVBQUtqRyxXQUFXNEIsUUFDaEJxRSxFQUFLakcsV0FBVyxHQUFHNEUsYUFLdkJ6RSxZQUFZQSxXQUFXa0MsUUFDM0I0RCxFQUFLM0QsV0FDTDJELEVBQUtKLGVBRUYsR0FHWEksRUFBS1IsYUFBZSxXQVFadkYsaUJBQ0YrRixFQUFLQyxRQUFPLEdBQ1pELEVBQUtJLFlBQVcsS0FJdEJKLEVBQUtKLFdBQWEsV0FDZHpELGdCQUNBNkQsRUFBS0ksWUFBVyxHQUNoQkosRUFBS0MsUUFBTyxJQUdoQkQsRUFBSy9ELGFBQWUsU0FBVStFLEdBQzFCLEdBQUlsTCxHQUFPb0QsUUFBUThILEVBQ2JsTCxHQUFpQixjQUNuQnlHLG1CQUVKekMsVUFBVWQsYUFBYWxELEVBQUtrRCxjQUM1QmMsVUFBVXdHLFNBQVEsSUFHdEJOLEVBQUszRCxTQUFXLFdBQ1pnQyxLQUFLaUMsU0FBUSxLQUlqQnhHLFVBQVksR0FBSWlHLFVBQ3BCRyxJQUFHZSxjQUFjbkgsVUFrSmpCLElBQUkvQyxLQUNBQyxZQUNJa0ssTUFBTyxZQUNQakssVUFBVyxtREFDWEMsY0FBZSxvREFFbkJpSyxNQUNJQyxhQUFpQix5QkFDakJDLGdCQUFpQiw4QkFDakJDLE1BQVMsbUNBQ1RDLGFBQWlCLCtCQUVyQkMsWUFDSUMsSUFBSyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9NT0RFTC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy8gZWF0cyBkYXRhOiBhbiBhcnJheSBvZiBwbGFjZXMgdG8gZWF0XG4vLyBhcm91bmQgQ29tbWVyY2lhbC1Ccm9hZHdheSBTdGF0aW9uXG4vLyBFYXN0IFZhblxuLy8gQnJpdGlzaCBDb2x1bWJpYVxuXG4vLyBiYXNpYyBkYXRhLCBsb2FkZWQgaWYgbW9yZSBkZXRhaWxlZCBtb2RlbCBub3QgZm91bmQgaW4gbG9jYWxTdG9yYWdlXG52YXIgRWF0c01vZGVsID0ge1xuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2VudGVyOiB7bGF0OiA0OS4yNjIzODcsIGxuZzogLTEyMy4wNjk5NTZ9LC8vNDkuMjYyMzg3LCAtMTIzLjA2OTc2OFxuICAgIHNwb3RzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiVW5jbGUgRmF0aWgncyBQaXp6YVwiLFxuICAgICAgICAgICAgbG9jYXRpb246IHtsYXQ6IDQ5LjI2MjQzNywgbG5nOiAtMTIzLjA3MDIxNX0sXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaXp6YVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiQnVkZGhhJ3MgT3JpZW50IEV4cHJlc3NcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7bGF0OiA0OS4yNjI3MTksIGxuZzogLTEyMy4wNjkyODl9LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiYXNpYW5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIkJvb3N0ZXIgSnVpY2VcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7bGF0OiA0OS4yNjI2NDEsIGxuZzogLTEyMy4wNjk0Mzh9LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwianVpY2VcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlN0YXJidWNrcyBDb2ZmZWVcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7bGF0OiA0OS4yNjE4NzQsIGxuZzogLTEyMy4wNzAwNzZ9LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiY29mZmVlXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJCbGVueiBDb2ZmZWVcIixcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7bGF0OiA0OS4yNjI1MzQsIGxuZzogLTEyMy4wNjk1Mjl9LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiY29mZmVlXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJNZWdhYml0ZSBQaXp6YVwiLFxuICAgICAgICAgICAgbG9jYXRpb246IHtsYXQ6IDQ5LjI2Mjc3OSwgbG5nOiAtMTIzLjA2OTMxN30sXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaXp6YVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiQnJvYWR3YXkgU3RhdGlvbiBTdXNoaVwiLFxuICAgICAgICAgICAgbG9jYXRpb246IHtsYXQ6IDQ5LjI2MjA4NCwgbG5nOiAtMTIzLjA3MDk2Mn0sXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJhc2lhblwiXG4gICAgICAgIH1cbiAgICBdXG59O1xuXG52YXIgbW9kZWwgPSB7fTtcblxuZnVuY3Rpb24gZ2V0TW9kZWwoKSB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5tb2RlbCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBFYXRzTW9kZWw7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGJ1aWxkV2luZG93Q29udGVudChtYXJrZXIpIHtcbiAgICB2YXIgc3RyZWV0dmlld1VybCA9ICdodHRwOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9zdHJlZXR2aWV3P3NpemU9MzAweDI1MCZsb2NhdGlvbj0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXIucG9zaXRpb24udG9TdHJpbmcoKS5zbGljZSgxLC0xKSA7Ly8gKyAnJmtleT0nICsga3Iuc3RyZWV0dmlldy5rZXk7XG4gICAgLy8gbWFya2VyLnBvc2l0aW9uLnRvU3RyaW5nKCkgbWV0aG9kIGNoYW5nZWQgdG8gaW5jbHVkZSBwYXJlbnRoZXNlcywgaGVuY2UgdGhlIHNsaWNlXG4gICAgLy8ga2V5IG5vdCByZXF1aXJlZFxuXG4gICAgdmFyIHBpY3R1cmUgPSAnPGltZyBjbGFzcz1cImJnaW1nXCIgc3JjPVwiJyArIHN0cmVldHZpZXdVcmwgKyAnXCI+JztcbiAgICB2YXIgY3NzID0gJ1wiaGVpZ2h0OjEwMCU7d2lkdGg6ODAlXCInO1xuICAgIHZhciBjb250ZW50ID0gJzxkaXYgb25jbGljaz1cIml0Y2h3aW5kb3coKVwiIHN0eWxlPScgK1xuICAgICAgICAgICAgICAgICAgICBjc3MgKyAnPicgKyBwaWN0dXJlICsgJzxicj48c3BhbiBzdHlsZT1cImNvbG9yOmRhcmtncmVlblwiPicgK1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIudGl0bGUgKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGJyPjxzcGFuIHN0eWxlPVwiY29sb3I6cmVkXCI+LUNMSUNLIEZPUiBNT1JFIElORk8tPC9zcGFuPjwvZGl2Pic7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAzcmQgcGFydHkgQVBJIHN0dWZmXG52YXIgZm91clNxdWFyZVVSTCA9ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbSc7XG5cbi8vIGdldCBjb250ZW50IGZvciBpbmZvIHNsaWRlcyBmcm9tIDNyZCBwYXJ0eSBzb3VyY2VzXG4vLyBiYXNlZCBvbiBpbmZvIGZyb20gbW9kZWxcbi8vIHRoZW4gYWRkIHRvIG1vZGVsIGFuZCB0byB2aWV3IG9iamVjdHNcbmZ1bmN0aW9uIGJ1aWxkU2xpZGVDb250ZW50KHNwb3QpIHtcbiAgICB2YXIgZm9ybWF0dGVkRGF0YSA9IFwiXCI7XG4gICAgdmFyIGxvYyA9IFwibGw9XCIgKyBzcG90LmxvY2F0aW9uLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBzcG90LmxvY2F0aW9uLmxuZy50b1N0cmluZygpO1xuICAgIHZhciBhamF4X2Vycm9yO1xuXG4gICAgLy8gZ2V0IHRoZSBmb3Vyc3F1YXJlIElEIG51bWJlciBvZiB0aGUgc3BvdFxuICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IGZvdXJTcXVhcmVVUkwgKyAnL3YyL3ZlbnVlcy9zZWFyY2gnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6ICdsaW1pdD0xJyArXG4gICAgICAgICAgICAgICAgICAgICcmJyArIGxvYyArICcmcXVlcnk9JyArIHNwb3QubmFtZSArXG4gICAgICAgICAgICAgICAgICAgICcmY2xpZW50X2lkPScrIGtyLmZvdXJzcXVhcmUuQ2xpZW50X2lkICtcbiAgICAgICAgICAgICAgICAgICAgJyZjbGllbnRfc2VjcmV0PScrIGtyLmZvdXJzcXVhcmUuQ2xpZW50X3NlY3JldCArXG4gICAgICAgICAgICAgICAgICAgICcmdj0yMDE2MDEzMCcsXG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGdldFZlbnVlSW5mbyxcbiAgICAgICAgICAgIGVycm9yOiBzZW5kRXJyb3JcbiAgICB9KTtcblxuICAgIC8vIGdpdmUgdGhlIHJlc3BvbnNlIG9uIHNwZWNpZmljIHZlbnVlIHRvIGFub3RoZXIgY2FsbCBmb3JcbiAgICAvLyBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uXG4gICAgZnVuY3Rpb24gZ2V0VmVudWVJbmZvKGRhdGEsIHN0YXR1cykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkluIGdldFZlbnVlSW5mbzogc3RhdHVzID0gXCIgKyBzdGF0dXMpO1xuICAgICAgICB2YXIgdmVudWUgPSBkYXRhLnJlc3BvbnNlLnZlbnVlc1swXTtcbiAgICAgICAgLy9odHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvVkVOVUVfSURcbiAgICAgICAgJC5hamF4KHsgLy8gdG8gZ2V0IHRoZSBkZXRhaWxlZCBmb3Vyc3F1YXJlIG9mIHRoZSAnY29tcGxldGUgdmVudWUnIGJhc2VkIG9uIElEXG4gICAgICAgICAgICB1cmw6IGZvdXJTcXVhcmVVUkwgKyAnL3YyL3ZlbnVlcy8nICsgdmVudWUuaWQsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogJ2xpbWl0PTEnICtcbiAgICAgICAgICAgICAgICAgICAgJyYnICsgbG9jICtcbiAgICAgICAgICAgICAgICAgICAgJyZxdWVyeT0nICsgc3BvdC5uYW1lICtcbiAgICAgICAgICAgICAgICAgICAgJyZjbGllbnRfaWQ9Jysga3IuZm91cnNxdWFyZS5DbGllbnRfaWQgK1xuICAgICAgICAgICAgICAgICAgICAnJmNsaWVudF9zZWNyZXQ9Jysga3IuZm91cnNxdWFyZS5DbGllbnRfc2VjcmV0ICtcbiAgICAgICAgICAgICAgICAgICAgJyZ2PTIwMTYwMTMwJyxcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgc3VjY2VzczogZm9ybWF0U2hvd0RhdGEsXG4gICAgICAgICAgICBlcnJvcjogc2VuZEVycm9yXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdFNob3dEYXRhKGRhdGEpe1xuICAgICAgICB2YXIgdmVudWUgPSBkYXRhLnJlc3BvbnNlLnZlbnVlO1xuICAgICAgICBmb3JtYXR0ZWREYXRhID0gJ0ZvdXJTcXVhcmUgaW5mbzogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGJyPicgKyAnPGJyPicgKyB2ZW51ZS5uYW1lICsgJzxicj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbnVlLmNvbnRhY3QuZm9ybWF0dGVkUGhvbmUgKyAnPGJyPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJy0gJyArIHZlbnVlLmxvY2F0aW9uLmFkZHJlc3MgKyAnPGJyPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJy0gJyArIHZlbnVlLmxvY2F0aW9uLmNpdHkgICsgJzxicj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICctICcgKyB2ZW51ZS5sb2NhdGlvbi5jb3VudHJ5ICArICc8YnI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAneC1zdHJlZXQ6ICcgKyB2ZW51ZS5sb2NhdGlvbi5jcm9zc1N0cmVldCArICc8YnI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ2hlY2staW5zOiAnICsgdmVudWUuc3RhdHMuY2hlY2tpbnNDb3VudC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8YnI+JyArIHZlbnVlLmxpa2VzLnN1bW1hcnkgKyAnPGJyPicgKyAnPGJyPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojJyArIHZlbnVlLnJhdGluZ0NvbG9yICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc7Y29sb3I6YmxhY2s7cGFkZGluZzoxJVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JhdGluZzogJyArIHZlbnVlLnJhdGluZy50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JyArICc8YnI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInICsgdmVudWUuYmVzdFBob3RvLnByZWZpeCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2FwMzAwJyArIHZlbnVlLmJlc3RQaG90by5zdWZmaXggKyAnXCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAvL3Nwb3Quc2xpZGVDb250ZW50ID0gZm9ybWF0dGVkRGF0YTtcbiAgICAgICAgdXBkYXRlU2xpZGVDb250ZW50KHNwb3QsIGZvcm1hdHRlZERhdGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZW5kRXJyb3Iob2JqZWN0LCBlcnJvciwgZXhjZXB0aW9uKSB7XG4gICAgICAgIC8vIGlmIGFwaSBub3Qgd29ya2luZyAoYW5kIGxvY2FsIHN0b3JhZ2UgaXMgY2xlYXJlZClcbiAgICAgICAgLy8gdGhlbiBjb250ZW50IG9mIGVhY2ggc2xpZGUgaXMgc2V0IHRvIGVycm9yIG1zZ1xuICAgICAgICB2YXIgYWpheF9lcnJvciA9IFwiU29ycnkuIDNyZCBwYXJ0eSBpbmZvIHVuYXZhaWxhYmxlLlwiO1xuICAgICAgICB1cGRhdGVTbGlkZUNvbnRlbnQoc3BvdCwgYWpheF9lcnJvcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVTbGlkZUNvbnRlbnQoc3BvdCwgZGF0YVN0cmluZykge1xuICAgIC8vIHVwZGF0ZSB0aGUgbW9kZWxcbiAgICBzcG90LnNsaWRlQ29udGVudCA9IGRhdGFTdHJpbmc7XG4gICAgLy8gdXBkYXRlIHRoZSB2aWV3XG4gICAgdmFyIHZtU3BvdCA9IGdldFNwb3Qoc3BvdC5uYW1lKTtcbiAgICBpZiAodm1TcG90KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW4gdXBkYXRlU2xpZGVDb250ZW50OiB2aWV3U3BvdCBcIik7XG4gICAgICAgIHZtU3BvdC5zbGlkZUNvbnRlbnQgPSBkYXRhU3RyaW5nO1xuICAgIH1cbn1cblxuLy8gTWFya04ncyBpbXBsZW1lbnRhdGlvbiBvZlxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gbnVtYmVyIGFuZCByZXR1cm5zIGl0IGFzIGEgc3RyaW5nIGZvciBPQXV0aGVudGljYXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuLy8gZnVuY3Rpb24gbm9uY2VfZ2VuZXJhdGUoKSB7XG4vLyAgIHJldHVybiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWUxMikudG9TdHJpbmcoKSk7XG4vLyB9XG5cbi8vIHZhciB5ZWxwX3VybCA9IFlFTFBfQkFTRV9VUkwgKyAnYnVzaW5lc3MvJyArIHNlbGYuc2VsZWN0ZWRfcGxhY2UoKS5ZZWxwLmJ1c2luZXNzX2lkO1xuXG4vLyAgICAgdmFyIHBhcmFtZXRlcnMgPSB7XG4vLyAgICAgICBvYXV0aF9jb25zdW1lcl9rZXk6IFlFTFBfS0VZLFxuLy8gICAgICAgb2F1dGhfdG9rZW46IFlFTFBfVE9LRU4sXG4vLyAgICAgICBvYXV0aF9ub25jZTogbm9uY2VfZ2VuZXJhdGUoKSxcbi8vICAgICAgIG9hdXRoX3RpbWVzdGFtcDogTWF0aC5mbG9vcihEYXRlLm5vdygpLzEwMDApLFxuLy8gICAgICAgb2F1dGhfc2lnbmF0dXJlX21ldGhvZDogJ0hNQUMtU0hBMScsXG4vLyAgICAgICBvYXV0aF92ZXJzaW9uIDogJzEuMCcsXG4vLyAgICAgICBjYWxsYmFjazogJ2NiJyAgICAgICAgICAgICAgLy8gVGhpcyBpcyBjcnVjaWFsIHRvIGluY2x1ZGUgZm9yIGpzb25wIGltcGxlbWVudGF0aW9uIGluIEFKQVggb3IgZWxzZSB0aGUgb2F1dGgtc2lnbmF0dXJlIHdpbGwgYmUgd3JvbmcuXG4vLyAgICAgfTtcblxuLy8gICAgIHZhciBlbmNvZGVkU2lnbmF0dXJlID0gb2F1dGhTaWduYXR1cmUuZ2VuZXJhdGUoJ0dFVCcseWVscF91cmwsIHBhcmFtZXRlcnMsIFlFTFBfS0VZX1NFQ1JFVCwgWUVMUF9UT0tFTl9TRUNSRVQpO1xuLy8gICAgIHBhcmFtZXRlcnMub2F1dGhfc2lnbmF0dXJlID0gZW5jb2RlZFNpZ25hdHVyZTtcblxuLy8gICAgIHZhciBzZXR0aW5ncyA9IHtcbi8vICAgICAgIHVybDogeWVscF91cmwsXG4vLyAgICAgICBkYXRhOiBwYXJhbWV0ZXJzLFxuLy8gICAgICAgY2FjaGU6IHRydWUsICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgY3J1Y2lhbCB0byBpbmNsdWRlIGFzIHdlbGwgdG8gcHJldmVudCBqUXVlcnkgZnJvbSBhZGRpbmcgb24gYSBjYWNoZS1idXN0ZXIgcGFyYW1ldGVyIFwiXz0yMzQ4OTQ4OTc0OTgzN1wiLCBpbnZhbGlkYXRpbmcgb3VyIG9hdXRoLXNpZ25hdHVyZVxuLy8gICAgICAgZGF0YVR5cGU6ICdqc29ucCcsXG4vLyAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4vLyAgICAgICAgIC8vIERvIHN0dWZmIHdpdGggcmVzdWx0c1xuLy8gICAgICAgfSxcbi8vICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbi8vICAgICAgICAgLy8gRG8gc3R1ZmYgb24gZmFpbFxuLy8gICAgICAgfVxuLy8gICAgIH07XG5cbi8vICAgICAvLyBTZW5kIEFKQVggcXVlcnkgdmlhIGpRdWVyeSBsaWJyYXJ5LlxuLy8gICAgICQuYWpheChzZXR0aW5ncyk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9NQVAgVklFV01PREVMLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbnZhciBtYXA7XG52YXIgdm1TcG90cyA9IFtdO1xudmFyIGluZm93aW5kb3c7XG5cbnZhciBSZWRSb2Fkc05HcmVlbkJ1c1N0b3BzID0gW1xuICB7XG4gICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxuICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHNcIixcbiAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7IHZpc2liaWxpdHk6IFwib2ZmXCIgfVxuICAgIF1cbiAgfSxcbiAge1xuICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXG4gICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgIHsgXCJnYW1tYVwiOiAwLjY1IH0sXG4gICAgICB7IFwiaHVlXCI6IFwiI2ZmOWMzMFwiIH0sXG4gICAgICB7IFwidmlzaWJpbGl0eVwiOiBcIm9uXCIgfSxcbiAgICAgIHsgXCJzYXR1cmF0aW9uXCI6IDk5IH0sXG4gICAgICB7IFwibGlnaHRuZXNzXCI6IC0xMiB9XG4gICAgXVxuICB9LHtcbiAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdFwiLFxuICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICB7IFwiaHVlXCI6IFwiIzAwZmYzM1wiIH0sXG4gICAgICB7IFwiZ2FtbWFcIjogMC42MCB9LFxuICAgICAgeyBcInNhdHVyYXRpb25cIjogNSB9LFxuICAgICAgeyBcInZpc2liaWxpdHlcIjogXCJvblwiIH0sXG4gICAgICB7IFwid2VpZ2h0XCI6IDQuNiB9LFxuICAgICAgeyBcImxpZ2h0bmVzc1wiOiAtMTIgfSAvL3dhcyAtMjJcbiAgICBdXG4gIH1cbl07XG5cbnZhciBtYXBPcHRpb25zID0ge1xuICAgICAgICBjZW50ZXI6IHtsYXQ6IDQ5LjI2MjM4NywgbG5nOiAtMTIzLjA2OTg2OH0sLy80OS4yNjIzODcsIC0xMjMuMDY5NzY4XG4gICAgICAgIC8vIENvbW1lcmNpYWwgQnJvYWR3YXkgU3RhdGlvbiA0OcKwMTXigLI0NeKAs04sIDEyM8KwMDTigLIwOOKAs1dcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIHpvb21Db250cm9sOiB0cnVlLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2UsXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgZGlzYWJsZURvdWJsZUNsaWNrWm9vbTogdHJ1ZSxcbiAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcbiAgICAgICAgc3R5bGVzOiBSZWRSb2Fkc05HcmVlbkJ1c1N0b3BzXG4gICAgfTtcblxudmFyIGljb25zID0ge1xuICBhc2lhbjoge1xuICAgIGljb246ICdpbWcvYXNpYW4ucG5nJ1xuICB9LFxuICBjb2ZmZWU6IHtcbiAgICBpY29uOiAnaW1nL2NvZmZlZS5wbmcnXG4gIH0sXG4gIGZvb2Q6IHtcbiAgICBpY29uOiAnaW1nL2Zvb2QucG5nJ1xuICB9LFxuICBqdWljZToge1xuICAgIGljb246ICdpbWcvanVpY2UucG5nJ1xuICB9LFxuICBwaXp6YToge1xuICAgIGljb246ICdpbWcvcGl6emEucG5nJ1xuICB9XG59O1xuXG4vLyBpbnZva2VkIGJ5IG1hcCA8c2NyaXB0PiBpbiBpbmRleC5odG1sXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1kaXYnKSwgbWFwT3B0aW9ucyApO1xuICAgIG1vZGVsID0gZ2V0TW9kZWwoKTsgLy8gbG9hZCBkYXRhIG9iamVjdCBlaXRoZXIgZnJvbSBsb2NhbFN0b3JhZ2Ugb3IgZmlsZVxuICAgIC8vIHRoZW4gYnVpbGQgdGhlIHNsaWRlIGNvbnRlbnQgd2l0aCBhamF4IGFwaSBjYWxscywgaWYgbmVjZXNzYXJ5XG4gICAgaWYgKCAobW9kZWwuc3BvdHNbMF0uc2xpZGVDb250ZW50ID09PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAobW9kZWwuc3BvdHNbMF0uc2xpZGVDb250ZW50LnNsaWNlKDAsNSkgPT0gXCJTb3JyeVwiKSkge1xuICAgICAgICAgICAgbW9kZWwuc3BvdHMuZm9yRWFjaCggZnVuY3Rpb24gKHNwb3QpIHtcbiAgICAgICAgICAgICAgICBidWlsZFNsaWRlQ29udGVudChzcG90KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZpZXdNb2RlbC5zcG90TGlzdChtb2RlbC5zcG90cyk7XG4gICAgLy9pZiAobmFycm93U2NyZWVuKCkpIHZpZXdNb2RlbC5maWx0ZXJPbihmYWxzZSk7XG4gICAgdmlld01vZGVsLmZpbHRlck9uKCFuYXJyb3dTY3JlZW4oKSk7XG4gICAgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHt9KTtcbiAgICBtYXAuc2V0Wm9vbShtb2RlbC56b29tTGV2ZWwpO1xuICAgIG1hcC5zZXRDZW50ZXIobW9kZWwuY2VudGVyKTtcblxuICAgIC8vYnVpbGQgYXJyYXkgb2YgZWF0aW5nIHNwb3Qgb2JqZWN0cyBiYXNlZCBvbiB0aGUgbW9kZWxcbiAgICBtb2RlbC5zcG90cy5mb3JFYWNoKCBmdW5jdGlvbihzcG90KSB7XG4gICAgICAgIHZtU3BvdHMucHVzaChuZXcgU3BvdChzcG90KSk7XG4gICAgfSk7XG5cbiAgICAvLyBzdGF5IGNlbnRyZWRcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbWFwLnNldENlbnRlcihtb2RlbC5jZW50ZXIpO1xuICAgICAgICAvL25hcnJvd1NjcmVlbigpID8gdmlld01vZGVsLmZpbHRlck9uKGZhbHNlKSA6IHZpZXdNb2RlbC5maWx0ZXJPbih0cnVlKTtcbiAgICAgICAgdmlld01vZGVsLmZpbHRlck9uKCFuYXJyb3dTY3JlZW4oKSk7XG4gICAgfSk7XG4gICAgLy8gd2hlbiB0aGluZ3Mgc2V0dGxlIGRvd24sIHN0b3JlIGEgY29weSBvZiB0aGUgbW9kZWwgbG9jYWxseVxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLm1vZGVsID0gSlNPTi5zdHJpbmdpZnkobW9kZWwpO1xuICAgIH0sIDMwMDApO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxudmFyIFNwb3QgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICB0aGlzLmxvY2F0aW9uID0gZGF0YS5sb2NhdGlvbjtcbiAgdGhpcy5jYXRlZ29yeSA9IGRhdGEuY2F0ZWdvcnk7XG4gIHRoaXMuc2xpZGVDb250ZW50ID0gZGF0YS5zbGlkZUNvbnRlbnQ7XG4gIHRoaXMubWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgIHBvc2l0aW9uOiB0aGlzLmxvY2F0aW9uLFxuICAgICAgICB0aXRsZTogdGhpcy5uYW1lLFxuICAgICAgICBpY29uOiBpY29uc1t0aGlzLmNhdGVnb3J5XS5pY29uLFxuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgb3BhY2l0eTogMC40XG4gIH0pO1xuICB0aGlzLndpbmRvd0NvbnRlbnQgPSBidWlsZFdpbmRvd0NvbnRlbnQodGhpcy5tYXJrZXIpO1xuXG4gIHRoaXMuY2xpY2tFdmVudCA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5kb09wZW5pbmcoKTtcbiAgICB9KTtcbiAgdGhpcy5vdmVyRXZlbnQgPSBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlciwgXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0LmhpTGlnaHRMaXN0SXRlbSgpO1xuICB9KTtcbiAgdGhpcy5vdXRFdmVudCA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyLCBcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5sb0xpZ2h0TGlzdEl0ZW0oKTtcbiAgfSk7XG59O1xuXG5TcG90LnByb3RvdHlwZS5oaUxpZ2h0TGlzdEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGNsZWFuVXBTY3JlZW4oKTtcbiAgICAkKFwibGk6Y29udGFpbnMoXCIgKyB0aGF0Lm5hbWUgKyBcIilcIikudG9nZ2xlQ2xhc3MoIFwiaGlsaWdodCB1bmRlclwiICk7XG59O1xuXG5TcG90LnByb3RvdHlwZS5sb0xpZ2h0TGlzdEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICQoXCJsaTpjb250YWlucyhcIiArIHRoYXQubmFtZSArIFwiKVwiKS50b2dnbGVDbGFzcyhcImhpbGlnaHQgdW5kZXJcIik7XG59O1xuXG5TcG90LnByb3RvdHlwZS5kb0JvdW5jZSA9IGZ1bmN0aW9uICgpICB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGNsZWFuVXBTY3JlZW4oKTtcbiAgICB0aGlzLm1hcmtlci5zZXRBbmltYXRpb24oZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSk7XG59O1xuXG5TcG90LnByb3RvdHlwZS5zdG9wQm91bmNlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubWFya2VyLnNldEFuaW1hdGlvbihudWxsKTtcbn07XG5cblNwb3QucHJvdG90eXBlLmRvT3BlbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgY2xlYW5VcFNjcmVlbigpO1xuICAgIHRoaXMubWFya2VyLnNldEFuaW1hdGlvbihnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQub3BlbldpbmRvdygpO1xuICAgICAgICB0aGF0Lm1hcmtlci5zZXRBbmltYXRpb24obnVsbCk7XG4gICAgfSwgMTAwMCk7XG59O1xuXG5TcG90LnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2aWV3TW9kZWwubGlzdENvbGxhcHNlKCk7XG4gICAgaW5mb3dpbmRvdy5zZXRDb250ZW50KHRoaXMud2luZG93Q29udGVudCk7XG4gICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgdGhpcy5tYXJrZXIpO1xuICAgIHRoaXMuY2xvc2VFdmVudCA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGluZm93aW5kb3csIFwiY2xvc2VjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2xlYW5VcFNjcmVlbigpO1xuICAgICAgICAgIHZpZXdNb2RlbC5saXN0RXhwYW5kKCk7XG4gICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQucmVtb3ZlTGlzdGVuZXIodGhhdC5jbG9zZUV2ZW50KTtcbiAgICB9KTtcbn07XG5cblNwb3QucHJvdG90eXBlLmhpZGVNYXJrZXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMubWFya2VyLnNldE1hcChudWxsKTsgfTtcblNwb3QucHJvdG90eXBlLnNob3dNYXJrZXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMubWFya2VyLnNldE1hcChtYXApOyB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vS08gVklFV01PREVMLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG52YXIgVmlld01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIERhdGFcbiAgICBzZWxmLmxpc3RPbiA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XG4gICAgc2VsZi5idXJnZXJNZW51ID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XG4gICAgc2VsZi5zcG90TGlzdCA9IGtvLm9ic2VydmFibGVBcnJheSgpO1xuICAgIHNlbGYuc2xpZGVPbiA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuICAgIHNlbGYuc2xpZGVDb250ZW50ID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgIHNlbGYuZmlsdGVyT24gPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuICAgIHNlbGYuZmlsdGVyU2xvdCA9IGtvLm9ic2VydmFibGUoKTtcbiAgICBzZWxmLmlzU2VsZWN0ZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcblxuICAgIC8vIEJlaGF2aW91cnNcblxuICAgIHNlbGYuYm91bmNlTWFya2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzcG90ID0gZ2V0U3BvdCh0aGlzLm5hbWUpO1xuICAgICAgICBzcG90LmRvQm91bmNlKCk7XG4gICAgfTtcblxuICAgIHNlbGYudW5ib3VuY2VNYXJrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzcG90ID0gZ2V0U3BvdCh0aGlzLm5hbWUpO1xuICAgICAgICBzcG90LnN0b3BCb3VuY2UoKTtcbiAgICB9O1xuXG4gICAgc2VsZi5zcG90UGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3BvdCA9IGdldFNwb3QodGhpcy5uYW1lKTtcbiAgICAgICAgc3BvdC5kb09wZW5pbmcoKTtcbiAgICB9O1xuXG4gICAgc2VsZi5zZXRGaWx0ZXJTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzU2VsZWN0ZWQodHJ1ZSk7XG4gICAgICAgIGNsZWFuVXBTY3JlZW4oKTtcbiAgICAgICAgc2VsZi5saXN0RXhwYW5kKCk7XG4gICAgfTtcblxuICAgIHNlbGYuZmlsdGVyU2xvdC5zdWJzY3JpYmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBzZWxmLmxpc3RFeHBhbmQoKTtcbiAgICAgICAgc2VsZi5zcG90TGlzdChmaWx0ZXJMaXN0KGRhdGEsIHZtU3BvdHMpKTtcbiAgICAgICAgcmVzZXRNYXJrZXJzKHNlbGYuc3BvdExpc3QoKSk7XG4gICAgfSk7XG5cbiAgICBzZWxmLm9uRW50ZXIgPSBmdW5jdGlvbiAoZGF0YSwgZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICBpZiAoaW5mb3dpbmRvdy5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYub3BlbkFQSXNsaWRlKGluZm93aW5kb3cuYW5jaG9yLnRpdGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNwb3RMaXN0KCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3BvdExpc3QoKVswXS5kb09wZW5pbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW5mb3dpbmRvdykgaW5mb3dpbmRvdy5jbG9zZSgpOyAvL2ZvciBhbnkgb3RoZXIga2V5cHJlc3NcbiAgICAgICAgICAgIHNlbGYuc2xpZGVPZmYoKTtcbiAgICAgICAgICAgIHNlbGYubGlzdEV4cGFuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGUgdGV4dCBpbiB0aGUgc2xvdFxuICAgIH07XG5cbiAgICBzZWxmLmxpc3RDb2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9kaXNhYmxlIGZvciBiaWcgc2NyZWVuOyBlbmFibGUgZm9yIHNtYWxsXG4gICAgICAgIC8vIHZhciBtZWRpYXF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoIFwiKG1heC13aWR0aDogNTQ5cHgpXCIgKTtcbiAgICAgICAgLy8gaWYgKG1lZGlhcXVlcnkubWF0Y2hlcykge1xuICAgICAgICAvLyAgICAgc2VsZi5saXN0T24oZmFsc2UpO1xuICAgICAgICAvLyAgICAgc2VsZi5idXJnZXJNZW51KHRydWUpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYgKG5hcnJvd1NjcmVlbigpKSB7XG4gICAgICAgICAgc2VsZi5saXN0T24oZmFsc2UpO1xuICAgICAgICAgIHNlbGYuYnVyZ2VyTWVudSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzZWxmLmxpc3RFeHBhbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFuVXBTY3JlZW4oKTtcbiAgICAgICAgc2VsZi5idXJnZXJNZW51KGZhbHNlKTtcbiAgICAgICAgc2VsZi5saXN0T24odHJ1ZSk7XG4gICAgfTtcblxuICAgIHNlbGYub3BlbkFQSXNsaWRlID0gZnVuY3Rpb24gKHNwb3ROYW1lKSB7XG4gICAgICAgIHZhciBzcG90ID0gZ2V0U3BvdChzcG90TmFtZSk7XG4gICAgICAgIGlmICghKHNwb3Quc2xpZGVDb250ZW50KSkge1xuICAgICAgICAgICAgZHViU2xpZGVDb250ZW50cygpO1xuICAgICAgICB9XG4gICAgICAgIHZpZXdNb2RlbC5zbGlkZUNvbnRlbnQoc3BvdC5zbGlkZUNvbnRlbnQpO1xuICAgICAgICB2aWV3TW9kZWwuc2xpZGVPbih0cnVlKTtcbiAgICB9O1xuXG4gICAgc2VsZi5zbGlkZU9mZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zbGlkZU9uKGZhbHNlKTtcbiAgICB9O1xufTtcblxudmFyIHZpZXdNb2RlbCA9IG5ldyBWaWV3TW9kZWwoKTtcbmtvLmFwcGx5QmluZGluZ3Modmlld01vZGVsKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1IRUxQRVIgRlVOQ1RJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL1xuXG5mdW5jdGlvbiBmaWx0ZXJMaXN0KHVzZXJUZXh0LCBtb2RlbEFycmF5KSB7XG4vL3Rlc3QgYXJyYXkgYWdhaW5zdCBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgICB2YXIgcmVzdWx0PVtdLFxuICAgICAgICAgcmUgPSBuZXcgUmVnRXhwKHVzZXJUZXh0LCBbJ2knXSk7XG4gICAgIG1vZGVsQXJyYXkuZm9yRWFjaCggZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIGlmIChyZS50ZXN0KGVsZW1lbnQubmFtZSkpIHJlc3VsdC5wdXNoKGVsZW1lbnQpO1xuICAgICB9KTtcbiAgICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZ2V0U3BvdChuYW1lKSB7XG4vLyByZXR1cm5zIHRoZSB2aWV3LW1vZGVsIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bVNwb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIHZtU3BvdHNbaV0ubmFtZSA9PSBuYW1lICkgcmV0dXJuIHZtU3BvdHNbaV07XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNldE1hcmtlcnMoc3BvdHMpIHtcbi8vIGVkaXQgdGhlIHNldCBvZiBkaXNwbGF5ZWQgbWFya2VycyBiYXNlZCBvbiB0aGUgZmlsdGVyZWQgc3BvdExpc3RcbiAgICB2bVNwb3RzLmZvckVhY2goZnVuY3Rpb24oc3BvdCkge1xuICAgICAgICBzcG90LmhpZGVNYXJrZXIoKTtcbiAgICB9KTtcbiAgICBzcG90cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgZ2V0U3BvdChpdGVtLm5hbWUpLnNob3dNYXJrZXIoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaXRjaHdpbmRvdygpIHtcbi8vIGNhbGxlZCBpbiB0aGUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgb2YgaW5mb1dpbmRvd1xuICAgIHZpZXdNb2RlbC5vcGVuQVBJc2xpZGUoaW5mb3dpbmRvdy5hbmNob3IudGl0bGUpO1xufVxuXG5mdW5jdGlvbiBjbGVhblVwU2NyZWVuKCkge1xuLy8gZ2V0IHJpZCBvZiBvbGQgb3Zlci1sYXlzIGFuZCBsaW5nZXJpbmcgZWZmZWN0c1xuICAgIGluZm93aW5kb3cuY2xvc2UoKTtcbiAgICBtYXAuc2V0Wm9vbShtb2RlbC56b29tTGV2ZWwpO1xuICAgIG1hcC5zZXRDZW50ZXIobW9kZWwuY2VudGVyKTtcbiAgICB2aWV3TW9kZWwuc2xpZGVPZmYoKTtcbiAgICAvLyByZXNldCB0aGUgaGlsaWdodCBhbmQgdW5kZXIgY2xhc3NlcyBvbiB0aGUgc3BvdC1saXN0XG4gICAgJChcInVsLnNwb3QtbGlzdCBsaVwiKS5yZW1vdmVDbGFzcyhcImhpbGlnaHQgdW5kZXJcIik7XG59XG5cbmZ1bmN0aW9uIGR1YlNsaWRlQ29udGVudHMoKSB7XG4gICAgaWYgKG1vZGVsLnNwb3RzWzBdLnNsaWRlQ29udGVudCkge1xuICAgICAgICBtb2RlbC5zcG90cy5mb3JFYWNoKGZ1bmN0aW9uKHNwb3QsIGluZGV4KSB7XG4gICAgICAgICAgICB2bVNwb3RzW2luZGV4XS5zbGlkZUNvbnRlbnQgPSBzcG90LnNsaWRlQ29udGVudDtcbiAgICAgICAgICAgIC8vIGluIHRoZSBldmVudCB0aGF0IGFwaSBjYWxsIGZhaWxzLCB3ZSB3YW50IHRvIHJlLWNvcHkgdGhlXG4gICAgICAgICAgICAvLyBtb2RlbCBsb2NhbGx5LCB0byBkaXNwbGF5IGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5tb2RlbCA9IEpTT04uc3RyaW5naWZ5KG1vZGVsKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuYXJyb3dTY3JlZW4oKSB7XG4gIHZhciBtZWRpYXF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoIFwiKG1heC13aWR0aDogNTQ5cHgpXCIgKTtcbiAgaWYgKG1lZGlhcXVlcnkubWF0Y2hlcykgcmV0dXJuIHRydWU7XG59XG5cblxuXG4vLz09PT09PT09PT09PT09PT09PT1USEUgRU5EPT09PT09PT09PT09PT09PT09PVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vL2Zyb20gaHR0cHM6Ly9kZXZlbG9wZXIuZm91cnNxdWFyZS5jb20vb3ZlcnZpZXcvYXV0aCN1c2VybGVzc1xuLy9odHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvc2VhcmNoP2xsPTQwLjcsLTc0JmNsaWVudF9pZD1DTElFTlRfSUQmY2xpZW50X3NlY3JldD1DTElFTlRfU0VDUkVUJnY9WVlZWU1NRERcblxuLy9mb3Vyc3F1YXJlLmNvbS92L2Jyb2Fkd2F5LXN0YXRpb24tc3VzaGkvNGFhZTljYjdmOTY0YTUyMDliNjIyMGUzXG52YXIga3IgPSB7XG4gICAgZm91cnNxdWFyZToge1xuICAgICAgICBPd25lcjogXCJLUiBEZWNrZXJcIixcbiAgICAgICAgQ2xpZW50X2lkOiBcIlpWTEtUS1NHVUxGRVEzWE1XV0kzQUwxQTJLWFlCRUtEMUxLU1VSVVpER1pZNDFKWFwiLFxuICAgICAgICBDbGllbnRfc2VjcmV0OiBcIlRNVDIwM0RIV09QUjNSNFJTTTFIRTRSTU9LRVdMR1RUMEZMTVpNVVoxT0pITUFLMVwiXG4gICAgfSxcbiAgICB5ZWxwOiB7XG4gICAgICAgIENvbnN1bWVyX0tleTogICAgXCJYcnhKT1VnR05LcTladVdoQlgxTER3XCIsXG4gICAgICAgIENvbnN1bWVyX1NlY3JldDogXCJ6cjJJNzZuVDhsME8tdHJrdXBZRTAwQjlCVEFcIixcbiAgICAgICAgVG9rZW46ICAgXCItX0Y4YU94b25SNnE1U3F2VVJ3d2dMSWRVLXF0ZVMtQlwiLFxuICAgICAgICBUb2tlbl9TZWNyZXQ6ICAgIFwiR0Y3dVJjUFdDcHpsSGNSUDNEaUpXanZjWEpFXCJcbiAgICB9LFxuICAgIHN0cmVldHZpZXc6IHtcbiAgICAgICAga2V5OiBcIkFJemFTeUFQNjMxejZXcU1vcHRvYUdoZXJoSlZCR3lOMXVQSFB0NFwiXG4gICAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
